<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÙˆÙ‚ Pi - Testnet</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body style="text-align:center; padding-top:50px; font-family:sans-serif;">

    <div style="background:white; padding:20px; border-radius:15px; display:inline-block; border:1px solid #ccc;">
        <h2>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ 10 Ù…Ø¹Ø§Ù…Ù„Ø§Øª</h2>
        <button id="payBtn" style="padding:15px 30px; background:#673ab7; color:white; border:none; border-radius:10px; cursor:pointer; font-size:18px;">
            Ø¯ÙØ¹ 1 Pi (ØªØ¬Ø±ÙŠØ¨ÙŠ)
        </button>
        <p id="status" style="margin-top:20px; color:#555;">Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ù‡Ø²</p>
    </div>

    <script>
        // Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø§Ù„Ø°ÙŠ Ø£Ø¹Ø·ÙŠØªÙ†ÙŠ Ø¥ÙŠØ§Ù‡
        const appId = "fluuzu5hhjlafmahe7uhbjv40qu8lbiqjp6vxbfpcumdvvo0fnezrkywfpkqcyvs";

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
        try {
            Pi.init({ version: "2.0", sandbox: true });
            console.log("Pi SDK initialized");
        } catch (err) {
            document.getElementById("status").innerText = "Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ SDK";
        }

        document.getElementById("payBtn").onclick = async function() {
            const statusLabel = document.getElementById("status");
            statusLabel.innerText = "â³ Ø¬Ø§Ø±ÙŠ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ©...";

            try {
                // Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ø­Ø¯Ø«Ø© Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚
                const auth = await Pi.authenticate(['username', 'payments'], onIncompletePaymentFound);
                
                statusLabel.innerText = "âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€: " + auth.user.username;

                // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
                const payment = await Pi.createPayment({
                    amount: 1,
                    memo: "Test Transaction",
                    metadata: { orderId: 123 }
                }, {
                    onReadyForServerApproval: function(paymentId) {
                        statusLabel.innerText = "ğŸ”¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¬Ø§Ù‡Ø²Ø©! ID: " + paymentId;
                    },
                    onReadyForServerCompletion: function(paymentId, txid) {
                        statusLabel.innerText = "âœ… Ù†Ø¬Ø­Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©! TXID: " + txid;
                    },
                    onCancel: function(paymentId) { statusLabel.innerText = "âŒ ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡"; },
                    onError: function(error, payment) { statusLabel.innerText = "âŒ Ø®Ø·Ø£: " + error.message; }
                });
            } catch (err) {
                statusLabel.innerText = "âŒ ÙØ´Ù„: " + err.message;
            }
        };

        function onIncompletePaymentFound(payment) {
            console.log("Incomplete payment found", payment);
        };
    </script>
</body>
</html>
