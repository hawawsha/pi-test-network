<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق التجربة</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body style="text-align: center; padding-top: 50px; font-family: sans-serif;">
    <h2>متجر الاختبار الجديد</h2>
    <p id="status">جاري التحميل...</p>
    <button id="pay-btn" style="display:none; padding: 20px; background: purple; color: white; border-radius: 10px;">
        دفع 2.6 Pi (Testnet)
    </button>

    <script>
        // تهيئة فورية
        Pi.init({ version: "2.0", sandbox: true });

        async function start() {
            try {
                const auth = await Pi.authenticate(['payments', 'username'], (p) => {});
                document.getElementById('status').innerText = "مرحباً " + auth.user.username;
                document.getElementById('pay-btn').style.display = "inline-block";
            } catch (e) {
                document.getElementById('status').innerText = "خطأ في الاتصال - تأكدي من الرابط";
                // إظهار الزر رغم الخطأ لفحص قوة الربط
                document.getElementById('pay-btn').style.display = "inline-block";
            }
        }
        
        document.getElementById('pay-btn').onclick = async () => {
            // هنا نضع كود createPayment الذي استخدمناه سابقاً
        };

        window.onload = start;
    </script>
</body>
</html>
